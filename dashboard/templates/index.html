<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="refresh" content="5">
    <title>Federation ACARS</title>
    <style>
        body {
            background-color: #2c3e50;
            color: white;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .top-banner { display: flex; justify-content: space-between; padding: 10px 5%; background: rgba(0,0,0,0.8); border-bottom: 2px solid #ecf0f1; font-size: 1.1em; letter-spacing: 2px; }
        .main-deck { display: flex; justify-content: space-around; align-items: center; flex-grow: 1; padding: 0 5%; }
        .panel { border: 1px solid rgba(255,255,255,0.2); padding: 25px; border-radius: 4px; background: rgba(0,0,0,0.5); min-width: 320px; }
        .center-deck { border: 2px solid white; padding: 50px; min-width: 480px; background: rgba(44, 62, 80, 0.4); text-align: center; }
        .led-row { display: flex; justify-content: space-between; align-items: center; margin: 12px 0; font-size: 0.95em; }
        .led-group { display: flex; align-items: center; }
        .led { width: 14px; height: 14px; border: 1px solid rgba(255,255,255,0.2); margin-left: 15px; }
        .led-green { background-color: #2ecc71; box-shadow: 0 0 10px #2ecc71; }
        .led-red { background-color: #e74c3c; box-shadow: 0 0 10px #e74c3c; }
        .led-orange { background-color: #f39c12; box-shadow: 0 0 10px #f39c12; }
        .led-blue { background-color: #3498db; box-shadow: 0 0 10px #3498db; }
        .status-val { color: #bdc3c7; font-size: 0.9em; }
        hr { border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 15px 0; }
    </style>
</head>
<body>
    <div class="top-banner">
        <div>LOC: {{ preflight.location_maidenhead }}</div>
        <div>OBSERVER: {{ preflight.observer_id }}</div>
        <div>JD: {{ preflight.jd }}</div>
    </div>
    <div class="main-deck">
        <div class="panel">
            <div style="color: #95a5a6; font-size: 0.8em; letter-spacing: 2px; font-weight: bold;">SYSTEM VITALS</div>
            <hr>
            <div class="led-row"><span>BRIDGE (5555)</span><div class="led {{ 'led-green' if preflight.bridge == 'OK' else 'led-red' }}"></div></div>
            <div class="led-row"><span>GPS (LOCK)</span><div class="led {{ 'led-green' if preflight.gps == 'OK' else 'led-orange' if preflight.gps == 'TRYING' else 'led-red' }}"></div></div>
            <div class="led-row">
                <span>WEATHER (PRED)</span>
                <div class="led-group"><span class="status-val">{{ preflight.weather }}</span><div class="led {{ preflight.weather_led }}"></div></div>
            </div>
            <div class="led-row">
                <span>DISK STORAGE</span>
                <div class="led-group"><span class="status-val">{{ preflight.disk }}</span><div class="led {{ preflight.disk_led }}"></div></div>
            </div>
            <div class="led-row">
                <span>TARGET MANIFEST</span>
                <div class="led-group"><span class="status-val">{{ preflight.targets }}</span><div class="led {{ preflight.targets_led }}"></div></div>
            </div>
            <div class="led-row"><span>FOG (VIS)</span><div class="led led-blue"></div></div>
        </div>
        <div class="center-deck">
            <h1 style="font-size: 6vw; margin: 0; letter-spacing: 5px;">{{ state.status }}</h1>
            <h2 style="color: #bdc3c7; letter-spacing: 2px; font-weight: normal;">{{ state.target }}</h2>
            <p style="color: #7f8c8d;">{{ state.message }}</p>
        </div>
        <div class="panel">
            <div style="color: #95a5a6; font-size: 0.8em; letter-spacing: 2px; font-weight: bold;">POST-FLIGHT QC</div>
            <hr>
            <p><span style="color: #7f8c8d;">LAST:</span> {{ qc.last_capture }}</p>
            <p><span style="color: #7f8c8d;">QUALITY:</span> <span style="color: {{ '#2ecc71' if qc.quality == 'OK' else '#e74c3c' }}">{{ qc.quality }}</span></p>
            <p><span style="color: #7f8c8d;">SNR:</span> {{ qc.snr_avg }}</p>
        </div>
    </div>
</body>
</html>
